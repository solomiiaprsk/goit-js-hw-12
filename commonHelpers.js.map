{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nexport const galleryList = document.querySelector('ul.gallery');\nexport function imgTemplate(images) {\n  const markUp = images\n    .map(\n      image => `<li class=\"img-container\">\n  <a\n    href=${image.largeImageURL}\n    ><img\n      src=${image.webformatURL}\n      alt=${image.tags}\n  /></a>\n  <ul class=\"img-card\">\n    <li class=\"img-des\">\n      <p><b>Likes</b> ${image.likes}</p>\n    </li>\n    <li class=\"img-des\">\n      <p><b>Views</b> ${image.views}</p>\n    </li>\n    <li class=\"img-des\">\n      <p><b>Comments</b> ${image.comments}</p>\n    </li>\n    <li class=\"img-des\">\n      <p><b>Downloads</b> ${image.downloads}</p>\n    </li>\n  </ul>\n</li>\n`\n    )\n    .join(' ');\n    galleryList.insertAdjacentHTML(\"beforeend\", markUp);\n    const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250\n});\nlightbox.refresh();\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nexport async function getImages(query, currentPage) {\n    const url = 'https://pixabay.com/api/';\n    const params = {\n        key: '43849659-9c68b2f1fcc3f13b9ce5bf5a4',\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: currentPage,\n        per_page: 15,\n    };\n        const res = await axios.get(url, { params });\n        return res.data;\n    \n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nimport { imgTemplate } from \"./js/render-functions\";\nimport { getImages } from \"./js/pixabay-api\";\n\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('#searchInput');\nconst searchBtn = document.querySelector('.searchBtn');\nconst galleryList = document.querySelector('ul.gallery');\nconst loaderEl = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector('.load-btn');\n\nlet queryTrimed;\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\nlet dataImages;\n\nsearchForm.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  showLoader();\n  galleryList.innerHTML = '';\n\n  queryTrimed = searchInput.value.trim();\n  if (queryTrimed === '') {\n    hideLoader();\n    return iziToast.warning({\n      title: 'Caution',\n      message: 'Searchfield empty. Please fill it out',\n      position: 'topRight',\n    });\n  }\n  currentPage = 1;\n\n  try {\n    dataImages = await getImages(queryTrimed, currentPage);\n    maxPage = Math.ceil(dataImages.totalHits / pageSize);\n\n    if (dataImages.hits.length === 0) {\n      hideLoader();\n        hideBtnLoad();\n        searchInput.value = \"\";\n        return iziToast.error({\n            message:\n                'There are no images matching your search query. Please try again!',\n            position: 'topRight',\n        });\n    }\n\n    imgTemplate(dataImages.hits);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  } finally {\n    hideLoader();\n  }\n  checkBtnStatus();\n  searchInput.value = '';\n}\n\nasync function onLoadMore(event) {\n  hideBtnLoad();\n  showLoader();\n  currentPage += 1;\n\n  try {\n    dataImages = await getImages(queryTrimed, currentPage);\n    imgTemplate(dataImages.hits);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  } finally {\n    hideLoader();\n    checkBtnStatus();\n    scrollGallery();\n  }\n}\n\nfunction showLoader() {\nloaderEl.classList.add('is-open');\n}\nfunction hideLoader() {\n  loaderEl.classList.remove('is-open');\n}\nfunction showBtnLoad() {\n  loadMoreBtn.classList.add('is-open');\n}\nfunction hideBtnLoad() {\n  loadMoreBtn.classList.remove('is-open');\n}\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideBtnLoad();\n    return iziToast.info({\n      title: 'Sorry',\n      message: \"You've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } else {\n    showBtnLoad();\n  }\n}\n\nfunction scrollGallery() {\n  const countCards = 2;\n  const height =\n    galleryList.firstElementChild.getBoundingClientRect().height * countCards;\n\n  scrollBy({\n    top: height,\n    behavior: 'smooth',\n  });\n}\n\n\nlet mybutton = document.getElementById(\"scrollToTopBtn\");\n\nwindow.onscroll = function () {\n    scrollFunction();\n};\n\nfunction scrollFunction() {\n    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {\n        mybutton.style.display = \"block\";\n    } else {\n        mybutton.style.display = \"none\";\n    }\n}\n\nfunction topFunction() {\n    document.documentElement.scrollTop = 0; \n}\n\nscrollToTopBtn.addEventListener('click', topFunction)"],"names":["galleryList","imgTemplate","images","markUp","image","SimpleLightbox","getImages","query","currentPage","url","params","axios","searchForm","searchInput","loaderEl","loadMoreBtn","queryTrimed","maxPage","pageSize","dataImages","onFormSubmit","onLoadMore","event","showLoader","hideLoader","iziToast","hideBtnLoad","error","checkBtnStatus","scrollGallery","showBtnLoad","height","mybutton","scrollFunction","topFunction"],"mappings":"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"}